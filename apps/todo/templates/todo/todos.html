{% extends "todo/base_todo.html" %}

{% block title %}
Mate | Todos
{% endblock title %}

{% block content %}
    <form method="POST" class="row g-4">
        {% csrf_token %}
        <div class="col-lg-11">
            <input type="text" class="form-control" name="task" placeholder="">
        </div>
        <div class="col-lg-1 d-grid">
            <button type="submit" class="btn btn-dark">Add</button>
        </div>
    </form>
    </br>
    <table class="table">
        <thead class="table-dark">
            <tr class="row">
                <th class="col-1"><a href="{% url 'complete_tasks' %}"><button type="button" class="btn btn-dark"><i class="fa-solid fa-circle-check" style="color: limegreen;"></i></button></a></th>
                <th class="col-9 text-center">Title</th>
                <th class="col-1"></th>
                <th class="col-1"><a href="{% url 'delete_tasks' %}"><button type="button" class="btn btn-dark"><i class="fa-solid fa-trash-can danger"></i></button></a></th>
            </tr>
        </thead>
        <tbody>
        {% if todos %}
            {% for todo in todos %}
                {% if todo.is_done %}
                    <tr class="table-success row">
                        <td class="col-1"><a href="{% url 'pending_task' todo.id %}"><button type="button" class="btn btn-dark"><i class="fa-solid fa-circle-check" style="color: limegreen;"></i></button></a></td>
                        <td class="col-9"><del>{{ todo.task }}</del></td>
                        <td class="col-1"><a href="{% url 'edit_task' todo.id %}"><button type="button" class="btn btn-dark"><i class="fa-solid fa-pen-to-square" style="color: yellow;"></i></button></a></td>
                        <td class="col-1"><a href="{% url 'delete_task' todo.id %}"><button type="button" class="btn btn-dark"><i class="fa-solid fa-trash-can" style="color: red;"></i></button></a></td>
                    </tr>
                {% else %}
                    <tr class="table-secondary row">
                        <td class="col-1"><a href="{% url 'complete_task' todo.id %}""><button type="button" class="btn btn-dark"><i class="fa-solid fa-circle" style="color: white;"></i></button></a></td>
                        <td class="col-9">{{ todo.task }}</td>
                        <td class="col-1"><a href="{% url 'edit_task' todo.id %}"><button type="button" class="btn btn-dark"><i class="fa-solid fa-pen-to-square" style="color: yellow;"></i></button></a></td>
                        <td class="col-1"><a href="{% url 'delete_task' todo.id %}"><button type="button" class="btn btn-dark"><i class="fa-solid fa-trash-can danger" style="color: red;"></i></button></a></td>
                    </tr>
                {% endif %}
            {% endfor %}
        {% endif %}
        </tbody>
    </table>
    <nav aria-label="Page navigation">
        <ul class="pagination justify-content-center">
            <!-- First page button -->
            <li class="page-item me-1 {% if todos.number == 1 %}disabled{% endif %} ">
                <a class="page-link bg-dark" href="?pg=1" aria-label="First">
                    <span class="text-light" aria-hidden="true">&laquo;</span>
                </a>
            </li>

            <!-- Two pages before -->
            {% if todos.number > 2 %}
                <li class="page-item"><a class="page-link bg-secondary text-light" href="?pg={{ todos.number|add:"-2" }}">{{ todos.number|add:"-2" }}</a></li>
            {% endif %}
            {% if todos.number > 1 %}
                <li class="page-item"><a class="page-link bg-secondary text-light" href="?pg={{ todos.number|add:"-1" }}">{{ todos.number|add:"-1" }}</a></li>
            {% endif %}

            <!-- Current page -->
            <li class="page-item active">
                <a class="page-link bg-dark text-light" href="?pg={{ todos.number }}" style="border-color: #000;">{{ todos.number }}</a>
            </li>

            <!-- Two pages after -->
            {% if todos.number < todos.paginator.num_pages %}
                <li class="page-item"><a class="page-link bg-secondary text-light" href="?pg={{ todos.number|add:"1" }}">{{ todos.number|add:"1" }}</a></li>
            {% endif %}
            {% if todos.number|add:"2" <= todos.paginator.num_pages %}
                <li class="page-item"><a class="page-link bg-secondary text-light" href="?pg={{ todos.number|add:"2" }}">{{ todos.number|add:"2" }}</a></li>
            {% endif %}

            <!-- Last page button -->
            <li class="page-item ms-1 {% if todos.number == todos.paginator.num_pages %}disabled{% endif %}">
                <a class="page-link bg-dark" href="?pg={{ todos.paginator.num_pages }}" aria-label="Last">
                    <span class="text-light" aria-hidden="true">&raquo;</span>
                </a>
            </li>
        </ul>
    </nav>
{% endblock content %}